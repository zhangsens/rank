!function(t){function e(s){if(a[s])return a[s].exports;var r=a[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};e.m=t,e.c=a,e.d=function(t,a,s){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t,e,a,s,r){this.data=t,this.x=e,this.y=a,this.r=s,this.fontSize=10,this.color=r};e.default=s},function(t,e,a){"use strict";var s=a(2),r=a(3),c=function(t){return t&&t.__esModule?t:{default:t}}(r),i=document.createElement("canvas");document.querySelector("#app").appendChild(i),i.width=1e3,i.height=2e3;var h=i.getContext("2d");(0,s.data)().then(function(t){new c.default(h,t)},function(t){console.log(t)})},function(t,e,a){"use strict";function s(){return new Promise(function(t,e){var a=new XMLHttpRequest;a.open("POST","/data",!1),a.send(null),a.responseText?t(JSON.parse(a.responseText)):e(0)})}Object.defineProperty(e,"__esModule",{value:!0}),e.data=s},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(4),c=s(r),i=a(5),h=(s(i),a(0)),n=s(h),o=function(t,e){this.data=e.result,this.ctx=t,console.log(e),this.characters=[];for(var a=0;a<this.data.length;a++){var s=20*a+100,r=0==a?100:(this.data[0].ballot_ratio-this.data[a-1].ballot_ratio)/2+100,i="hsla("+360*a/this.data.length+",80%,50%,1)",h=new n.default(this.data[a],s,r,1,i);h.nX=800,h.nY=20*(a+1)+100,this.characters.push(h)}this.draw(),new c.default(this.characters,this.ctx).test()};o.prototype={chart:function(){this.ctx.strokeStyle="hsla(200,80%,60%,1)",this.ctx.moveTo(100,50),this.ctx.lineTo(100,700),this.ctx.lineTo(750,700),this.ctx.stroke(),this.ctx.strokeStyle="hsla(0,0%,0%,0.5)";for(var t=0;t<6;t++)this.ctx.beginPath(),this.ctx.lineTo(100,100*(t+1)),this.ctx.lineTo(700,100*(t+1)),this.ctx.stroke();for(var e=0;e<this.characters.length;e++)this.ctx.save(),this.ctx.beginPath(),this.ctx.lineTo(100+20*(e+1),100),this.ctx.lineTo(100+20*(e+1),700),this.ctx.stroke(),this.ctx.fillStyle=this.characters[e].color,this.ctx.translate(90+20*(e+1),720),this.ctx.rotate(4*Math.PI/9),this.ctx.fillText(this.data[e].chn_name,0,0),this.ctx.restore()},rang:function(t,e){for(var a=(e-t)/6,s=0;s<7;s++)this.ctx.fillText(e-s*a,0,100*(s+1))},list:function(){for(var t=0;t<this.characters.length;t++)this.ctx.fillStyle=this.characters[t].color,this.ctx.fillText(this.characters[t].data.chn_name,this.characters[t].nX,this.characters[t].nY)},draw:function(){for(var t=0,e=0,a=0,s=0;a<1;e++)s=this.characters[0].data.ballot_sum/Math.pow(10,e),s>1?(t=Math.floor(s)*Math.pow(10,e),a=0):a=1;t=6*Math.ceil(t/6),this.chart(),this.rang(0,t),this.list(),new c.default(this.characters,this.ctx).rectangle()}},e.default=o},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(0),r=(function(t){t&&t.__esModule}(s),function(t,e){this.characters=t,this.ctx=e});r.prototype={line:function(){for(var t=0;t<this.characters.length;t++)0==t?(this.ctx.beginPath(),this.ctx.moveTo(this.characters[t].x,this.characters[t].y)):(this.ctx.beginPath(),this.ctx.moveTo(this.characters[t-1].x,this.characters[t-1].y),this.ctx.lineTo(this.characters[t].x,this.characters[t].y)),this.ctx.arc(this.characters[t].x,this.characters[t].y,this.characters[t].r,0,2*Math.PI),this.ctx.strokeStyle=this.characters[t].color,this.ctx.stroke()},rectangle:function(){for(var t=0;t<this.characters.length;t++)this.ctx.fillStyle=this.characters[t].color,this.ctx.fillRect(this.characters[t].x,this.characters[t].y,20,700-this.characters[t].y)},pie:function(){},timg:function(){},test:function(){for(var t=0;t<this.characters.length;t++)this.ctx.fillStyle="hsla("+360*t/this.characters.length+",80%,50%,1)",this.ctx.fillText(this.characters[t].data.chn_name+":"+this.characters[t].data.ballot_sum+"票",0,40*(t+.25)+800),this.ctx.fillText("有"+this.characters[t].data.real_love_num+"人和你抢老婆",0,40*(t+.75)+800)}},e.default=r},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){this.data=t,console.log(t)};s.prototype={draw:function(){}},e.default=s}]);